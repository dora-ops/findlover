Object.extend=function(t,e){for(var i in e){t[i]=e[i]}return t};window.lib=window.lib||{};if(!lib.SITE_DOMAIN){var getDomain=function(){var t=2;var e=window.location.hostname.split(".");e=e.slice(e.length-t);return e.join(".")};lib.SITE_DOMAIN=getDomain()}lib.PROJECT_VERSION="201104221818300317";lib.action=lib.action||{};lib.action.noFlashuidQa=function(){this.init=function(t){var e=this;var i=lib.SITE_DOMAIN.match(/pps/);try{var r;var n=navigator.userAgent.toLowerCase();this.par={};this.pars=[];this.custom={};this.filter=[];this.time=0;this.w=window;this.l=window.location;this.d=window.document;this.urlMap={rdm:"rdm",qtcurl:"qtcurl",rfr:"rfr",lrfr:"lrfr",jsuid:"jsuid",qtsid:"qtsid",ppuid:"ppuid",platform:"platform",weid:"weid",flshuid:"flshuid",fcode:"fcode",ffcode:"ffcode",coop:"coop",odfrm:"odfrm"};this.cookieMap={flshuid:"QC005",jsuid:"QC006",lrfr:"QC007",qtsid:"QC008",QY_FC:"QC009",QY_FFC:"QC014",gaflag:"QC011",odfrm:"QC132"};t=t||{};this.times=t.times||5;this.timeouts=t.timeouts||1e3;this.url=t.url||window.location.protocol+"//msg.71.am/jspb.gif";if(this.url.indexOf("?")==-1){this.url+="?"}else if(this.url.slice(-1)!="&"){this.url+="&"}this.flag=t.flag||"QC010";this.callback=t.callback||function(){};if(typeof t.urlMap=="object"){Object.extend(this.urlMap,t.urlMap)}if(typeof t.cookieMap=="object"){Object.extend(this.cookieMap,t.cookieMap)}if(typeof t.custom=="object"){Object.extend(this.custom,t.custom)}if(t.filter instanceof Array){this.filter=t.filter}var o=this.urlMap;this.par[o.rdm]=this.rand();this.par[o.qtcurl]=this.u(this.l.href);this.par[o.rfr]=this.u(this.d.referrer);this.par[o.lrfr]=this.getLrfr();this.par[o.jsuid]=this.getJsuid();this.par[o.qtsid]=this.getQtsid();this.par[o.ppuid]=this.getUserInfoUid();this.par[o.platform]=/ipad/i.test(n)?"21":/iphone os/i.test(n)?"31":"11";if(i){this.par[o.platform]="20"+this.par[o.platform]}this.par[o.fcode]=this.getFc();this.par[o.ffcode]=this.getFfc();this.par[o.coop]=this.getCoop();this.par[o.weid]=this.getWeid();Object.extend(this.par,this.custom);r=setTimeout(function(){e.post()},0);var a=this.queryToJson(this.l.href);var s=this.cookieMap[this.urlMap.odfrm];var c=a[this.urlMap.odfrm]||this.cookieGet(s)||"";if(c){c=c;this.par[o.odfrm]=c;this.cookieSet(s,c,0,"/",lib.SITE_DOMAIN);var f=this.d.getElementsByTagName("body")[0];var u=this.queryToJson(f.getAttribute("data-pb")||"")||{};u[o.odfrm]=c;var h=this.jsonToQuery(u);f.setAttribute("data-pb",h)}var l=document.getElementById("block-B");if(l&&l.getAttribute("data-pb")){var d=l.getAttribute("data-pb");var p=d.match(/(^|&)?tmplt=([^&]+)/i);if(p&&p[2]){e.par["tmplt"]=p[2]}}}catch(v){}};this.getUserInfoUid=function(){try{var userInfo=this.cookieGet("P00002");if(userInfo){userInfo=userInfo==window.JSON?window.JSON.parse(userInfo):eval("("+userInfo+")")}if(userInfo&&userInfo.uid){return userInfo.uid}else{return""}}catch(e){return""}};this.u=function(t){try{var e=encodeURIComponent;return e instanceof Function?e(t):escape(t)}catch(i){return""}};this.hash=function(t){try{var e=1,i=0;if(t){e=0;for(var r=t.length-1;r>=0;r--){i=t.charCodeAt(r);e=(e<<6&268435455)+i+(i<<14);i=e&266338304;e=i!==0?e^i>>21:e}}return e}catch(n){return""}};this.rand=function(t){try{var e=[];if(!isNaN(t)){for(var i=0;i<t;i++){e.push(Math.round(Math.random()*2147483647).toString(36))}}else{e.push(Math.round(Math.random()*2147483647))}return e.join("")}catch(r){return""}};this.cookieGet=function(t){var e=function(t){if(new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(t)){var e=new RegExp("(^| )"+t+"=([^;]*)(;|$)"),i=e.exec(document.cookie);if(i){return i[2]||""}}return""};try{t=e(t);if("string"==typeof t){if(t.length>1&&t=="deleted"){return""}else{return decodeURIComponent(t)||""}}else{return""}}catch(i){return""}};this.cookieSet=function(t,e,i,r,n,o){return};this.getJsuid=function(){try{var t;var e=this.cookieMap.jsuid;t=this.cookieGet(e);if(!t||!isNaN(t)){t=this.rand(4)}return t}catch(i){return""}};this.getQtsid=function(){try{var t,e=/^\d{10}\.\d{10}\.\d{10}\.\d+$/;var i=this.cookieMap.qtsid;var r=function(){return parseInt(new Date/1e3,10).toString()};t=this.cookieGet(i);if(this.cookieGet(this.flag)){return t}if(!e.test(t)){var n=r();t=[n,n,n,"1"]}else{t=t.split(".");t[1]=t[2];t[2]=r();t[3]=parseInt(t[3],10)+1}return t}catch(o){return""}};this.getLrfr=function(){try{var t,e=this;var i=this.cookieMap.lrfr;var r=this.d.referrer.match(/http[s]?:\/\/([^\/]*)/);r=r?r[1]:"";t=this.cookieGet(i);t=t=="undefined"?"":t;var n=this.l.hostname;var o=r&&r.match(/i?qiyi\.com|pps\.tv/);var a=t;if(!t){if(!this.d.referrer||o){a="DIRECT"}else{a=this.u(this.d.referrer)}}else if(!this.d.referrer){a="DIRECT"}else if(r!==n&&r.indexOf(lib.SITE_DOMAIN)===-1){if(!o){a=this.u(this.d.referrer)}}if(t!=a){}return a}catch(s){return""}};this.setFlashId=function(t){};this.getFc=function(){try{var t=this.l.search.match(/[\?&]fc=([^&]*)(&|$)/i);var e=this.cookieMap.QY_FC;var i=this.cookieGet(e);if(i=="b22dab601821a896"){return i}if(t){t=t[1]}else{t=this.cookieGet(e);if(!t||t=="undefined"){t=""}}return t}catch(r){return""}};this.getFfc=function(){try{var t=this.l.search.match(/[\?&]ffc=([^&]*)(&|$)/i);var e=this.cookieMap.QY_FFC;if(t){t=t[1]}else{t=this.cookieGet(e);if(!t||t=="undefined"){t=""}}return t}catch(i){return""}};this.getCoop=function(){var t="";var e;if(this.l.host.split(".")[0]=="mini"){e=lib.$url(this.l.href,"app");e=e&&e["app"]||"";if(e){t="coop_"+e.replace("bdbrowser","bdexplorer")}}else{if(this.w.INFO&&this.w.INFO.flashVars&&this.w.INFO.flashVars.coop){t=this.w.INFO.flashVars.coop}}return t};this.getWeid=function(){return window.webEventID||""};this.post=function(){var t=this;try{t.pars=[];var e,i=t.filter.length,r;if(i===0){for(e in t.par){t.pars.push([e,t.par[e]].join("="))}}else{for(e=0;e<i;e++){r=t.filter[e];t.pars.push([r,t.par[r]].join("="))}}t.pars=t.pars.join("&");window.jsQa=new Image(1,1);window.jsQa.src=t.url+t.pars;t.callback()}catch(n){return""}};this.iframeRequest=function(t){};this.syncCookie=function(t,e,i){};this.queryToJson=function(t){var e=Array.isArray||function(t){return Object.prototype.toString.call(t)=="[object Array]"};t=t||this.l.href;var i=t.substr(t.lastIndexOf("?")+1),r=i.split("&"),n=r.length,o={},a=0,s,c,f,u;for(;a<n;a++){if(!r[a]){continue}u=r[a].split("=");s=u.shift();c=u.join("=");f=o[s];if("undefined"==typeof f){o[s]=c}else if(e(f)){f.push(c)}else{o[s]=[f,c]}}return o};this.jsonToQuery=function(t,e){var i=Array.isArray||function(t){return Object.prototype.toString.call(t)=="[object Array]"};var r=function(t,e){var i,r,n;if("function"==typeof e){for(r in t){if(t.hasOwnProperty(r)){n=t[r];i=e.call(t,n,r);if(i===false){break}}}}return t};var n=function(t){return String(t).replace(/[#%&+=\/\\\ \u3000\f\r\n\t]/g,function(t){return"%"+(256+t.charCodeAt()).toString(16).substring(1).toUpperCase()})};var o=[],a,s=e||function(t){return n(t)};r(t,function(t,e){if(i(t)){a=t.length;while(a--){o.push(e+"="+s(t[a],e))}}else{o.push(e+"="+s(t,e))}});return o.join("&")}};(function(){var t=new lib.action.noFlashuidQa;try{t.init({url:window.location.protocol+"//msg.71.am/tmpstats.gif?type=1501272_iqy"})}catch(e){}})();